(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{426:function(e,_,v){"use strict";v.r(_);var t=v(56),c=Object(t.a)({},(function(){var e=this,_=e.$createElement,v=e._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"_10-3-本身的缺陷-randomaccessfile"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-本身的缺陷-randomaccessfile"}},[e._v("#")]),e._v(" 10.3 本身的缺陷："),v("code",[e._v("RandomAccessFile")])]),e._v(" "),v("p",[v("code",[e._v("RandomAccessFile")]),e._v("用于包含了已知长度记录的文件，以便我们能用"),v("code",[e._v("seek(")]),e._v(")从一条记录移至另一条；然后读取或修改那些记录。各记录的长度并不一定相同；只要知道它们有多大以及置于文件何处即可。")]),e._v(" "),v("p",[e._v("首先，我们有点难以相信"),v("code",[e._v("RandomAccessFile")]),e._v("不属于"),v("code",[e._v("InputStream")]),e._v("或者"),v("code",[e._v("OutputStream")]),e._v("分层结构的一部分。除了恰巧实现了"),v("code",[e._v("DataInput")]),e._v("以及"),v("code",[e._v("DataOutput")]),e._v("（这两者亦由"),v("code",[e._v("DataInputStream")]),e._v("和"),v("code",[e._v("DataOutputStream")]),e._v("实现）接口之外，它们与那些分层结构并无什么关系。它甚至没有用到现有"),v("code",[e._v("InputStream")]),e._v("或"),v("code",[e._v("OutputStream")]),e._v("类的功能——采用的是一个完全不相干的类。该类属于全新的设计，含有自己的全部（大多数为固有）方法。之所以要这样做，是因为"),v("code",[e._v("RandomAccessFile")]),e._v("拥有与其他IO类型完全不同的行为，因为我们可在一个文件里向前或向后移动。不管在哪种情况下，它都是独立运作的，作为"),v("code",[e._v("Object")]),e._v("的一个“直接继承人”使用。")]),e._v(" "),v("p",[e._v("从根本上说，"),v("code",[e._v("RandomAccessFile")]),e._v("类似"),v("code",[e._v("DataInputStream")]),e._v("和"),v("code",[e._v("DataOutputStream")]),e._v("的联合使用。其中，"),v("code",[e._v("getFilePointer()")]),e._v("用于了解当前在文件的什么地方，"),v("code",[e._v("seek()")]),e._v("用于移至文件内的一个新地点，而"),v("code",[e._v("length()")]),e._v("用于判断文件的最大长度。此外，构造器要求使用另一个参数（与C的"),v("code",[e._v("fopen()")]),e._v("完全一样），指出自己只是随机读（"),v("code",[e._v('"r"')]),e._v("），还是读写兼施（"),v("code",[e._v('"rw"')]),e._v("）。这里没有提供对“只写文件”的支持。也就是说，假如是从"),v("code",[e._v("DataInputStream")]),e._v("继承的，那么"),v("code",[e._v("RandomAccessFile")]),e._v("也有可能能很好地工作。")]),e._v(" "),v("p",[e._v("还有更难对付的。很容易想象我们有时要在其他类型的数据流中搜索，比如一个"),v("code",[e._v("ByteArrayInputStream")]),e._v("，但搜索方法只有"),v("code",[e._v("RandomAccessFile")]),e._v("才会提供。而后者只能针对文件才能操作，不能针对数据流操作。此时，"),v("code",[e._v("BufferedInputStream")]),e._v("确实允许我们标记一个位置（使用"),v("code",[e._v("mark()")]),e._v("，它的值容纳于单个内部变量中），并用"),v("code",[e._v("reset()")]),e._v("重设那个位置。但这些做法都存在限制，并不是特别有用。")])])}),[],!1,null,null,null);_.default=c.exports}}]);